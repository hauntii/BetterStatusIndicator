function V(n){window.enmity.plugins.registerPlugin(n)}const b=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const e=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const I=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme;const k=window.enmity.modules.common.Linking,B=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function H(n){return window.enmity.patcher.create(n)}var r="BetterStatusIndicator",D="1.0.0",z="Reveal statuses for every platform user is using",U=[{name:"mafu",id:"519760564755365888"}],Y="#da70d6",G={name:r,version:D,description:z,authors:U,color:Y};const{components:t}=window.enmity;t.Alert,t.Button,t.FlatList;const L=t.Image;t.ImageBackground,t.KeyboardAvoidingView,t.Modal;const j=t.Pressable;t.RefreshControl;const q=t.ScrollView;t.SectionList,t.StatusBar,t.StyleSheet,t.Switch;const T=t.Text;t.TextInput,t.TouchableHighlight,t.TouchableOpacity,t.TouchableWithoutFeedback,t.Touchable;const S=t.View;t.VirtualizedList,t.Form,t.FormArrow,t.FormCTA,t.FormCTAButton,t.FormCardSection,t.FormCheckbox,t.FormDivider,t.FormHint,t.FormIcon,t.FormInput,t.FormLabel,t.FormRadio;const c=t.FormRow,N=t.FormSection;t.FormSelect,t.FormSubLabel,t.FormSwitch,t.FormTernaryCheckBox,t.FormText,t.FormTextColors,t.FormTextSizes;function h(n){return window.enmity.assets.getIDByName(n)}function P(...n){return window.enmity.modules.getByProps(...n)}function v(...n){return window.enmity.modules.getByName(...n)}window.enmity.modules.common;function f(n){return"#"+("000000"+n.toString(16)).slice(-6)}const K=v("CustomColorPickerActionSheet",{default:!1}).default;function C({label:n,color:o,setColor:m,leading:s,onSelect:a=void 0}){const i=B.createThemedStyleSheet({pickedColorText:{color:b.ThemeColorMap.TEXT_NORMAL,marginLeft:10,fontSize:16,width:72},pickerColorPreview:{width:24,height:24,backgroundColor:f(o),borderRadius:3,borderWidth:1,borderColor:b.ThemeColorMap.HEADER_SECONDARY}});return e.createElement(c,{label:n,trailing:e.createElement(S,{style:{flexDirection:"row",alignItems:"center"}},e.createElement(S,{style:i.pickerColorPreview}),e.createElement(T,{style:i.pickedColorText},f(o)),e.createElement(c.Arrow,null)),leading:e.createElement(c.Icon,{source:h(s)}),onPress:()=>{I.push(()=>e.createElement(K,{color:o,onSelect:l=>{m(l),a&&a(l),I.pop()}}))}})}function u(n,o,m){window.enmity.settings.set(n,o,m)}function w(n,o,m){return window.enmity.settings.get(n,o,m)}const W=h("img_account_sync_github_white"),X=h("Discord"),$=h("img_account_sync_twitter_white"),J=h("ic_message_retry"),Q=P("acceptInviteAndTransitionToInviteChannel");var Z=({settings:n})=>{const o=B.createThemedStyleSheet({container:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:b.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:b.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:b.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}}),[m,s]=e.useState(w(r,"online",3908956)),[a,i]=e.useState(w(r,"offline",7634829)),[l,d]=e.useState(w(r,"idle",16426522)),[g,R]=e.useState(w(r,"dnd",15548997)),[O,A]=e.useState(w(r,"streaming",5846677));return e.createElement(q,null,e.createElement(S,{style:o.container},e.createElement(L,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:o.image}),e.createElement(S,{style:o.title},e.createElement(T,{style:o.name},"BetterStatusIndicator"),e.createElement(T,{style:o.author},"by mafu"))),e.createElement(N,{title:"SETTING"},e.createElement(C,{label:"Online",color:m,setColor:s,leading:"StatusOnline",onSelect:p=>{u(r,"online",p)}}),e.createElement(C,{label:"Offline",color:a,setColor:i,leading:"StatusOffline",onSelect:p=>{u(r,"offline",p)}}),e.createElement(C,{label:"Idle",color:l,setColor:d,leading:"StatusIdle",onSelect:p=>{u(r,"idle",p)}}),e.createElement(C,{label:"DND",color:g,setColor:R,leading:"StatusDND",onSelect:p=>{u(r,"dnd",p)}}),e.createElement(C,{label:"Streaming",color:O,setColor:A,leading:"StatusStreaming",onSelect:p=>{u(r,"streaming",p)}}),e.createElement(c,{label:"Reset to default",trailing:c.Arrow,leading:e.createElement(c.Icon,{source:J}),onPress:()=>{u(r,"offline",7634829),i(7634829),u(r,"online",3908956),s(3908956),u(r,"idle",16426522),d(16426522),u(r,"dnd",15548997),R(15548997),u(r,"streaming",5846677),A(5846677)}})),e.createElement(N,{title:"INFORMATION"},e.createElement(c,{label:"Follow me on Twitter",style:o.info,trailing:c.Arrow,leading:e.createElement(c.Icon,{source:$}),onPress:()=>{k.openURL("https://twitter.com/m4fn3")}}),e.createElement(c,{label:"Visit my server for help",style:o.info,trailing:c.Arrow,leading:e.createElement(c.Icon,{source:X}),onPress:()=>{Q.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{I.pop()}})}}),e.createElement(c,{label:"Check Source on GitHub",style:o.info,trailing:c.Arrow,leading:e.createElement(c.Icon,{source:W}),onPress:()=>{k.openURL("https://github.com/m4fn3/BetterStatusIndicator")}})),e.createElement(T,{style:o.footer},`v${D}`))};function _(n,o,m){return window.enmity.utilities.findInReactTree(n,o,m)}const E=H("BetterStatusIndicator"),F=P("setCurrentUserOnConnectionOpen"),ee=v("ProfileBadges",{all:!0,default:!1}),te=v("Status",{default:!1}),ne=h("ic_mobile_status"),oe=h("ic_monitor_24px"),ie=h("ic_public");function x(n){let o=f(w(r,"offline",7634829));return n=="online"?o=f(w(r,"online",3908956)):n=="idle"?o=f(w(r,"idle",16426522)):n=="dnd"?o=f(w(r,"dnd",15548997)):n=="streaming"&&(o=f(w(r,"streaming",5846677))),o}function y({client:n,stat:o}){let m=ie,s;return n=="desktop"?(m=oe,s={}):n=="mobile"?(m=ne,s={marginRight:5,marginLeft:8}):n=="web"&&(s={height:20,width:20,marginRight:2,marginLeft:2}),e.createElement(L,{source:m,style:{tintColor:x(o),marginLeft:5,...s}})}function M({statuses:n}){return e.createElement(S,{style:{flexDirection:"row",marginRight:10,alignItems:"center"}},...n)}const re={...G,onStart(){E.after(te,"default",(o,[m],s)=>{s.props.children.props.style.tintColor=x(m.status)}),E.after(j.type,"render",(o,m,s)=>{const a=_(s,i=>{var l;return((l=i.props)==null?void 0:l.children[0][1].type.name)=="FriendPresence"});if(a){let i=[];const l=a.props.children[0][1].props.userId,d=F.getState().clientStatuses[l];d&&(d.desktop&&i.unshift(e.createElement(y,{client:"desktop",stat:d.desktop})),d.mobile&&i.unshift(e.createElement(y,{client:"mobile",stat:d.mobile})),d.web&&i.unshift(e.createElement(y,{client:"web",stat:d.web})),i.length&&s.props.children[0].splice(-1,0,e.createElement(M,{statuses:i})))}});const n=E.after(S,"render",(o,m,s)=>{const a=_(s,i=>i.props.type==="MEMBER");a&&(E.after(a.type,"type",(i,[l],d)=>{const g=F.getState().clientStatuses[l.userId];g&&(g.web&&d.props.children.push(e.createElement(y,{client:"web",stat:g.web})),g.mobile&&d.props.children.push(e.createElement(y,{client:"mobile",stat:g.mobile})),g.desktop&&d.props.children.push(e.createElement(y,{client:"desktop",stat:g.desktop})))}),n())});ee.forEach(o=>{E.after(o,"default",(m,[s],a)=>{let i=[];const l=F.getState().clientStatuses[s.user.id];if(l&&(l.desktop&&i.unshift(e.createElement(y,{client:"desktop",stat:l.desktop})),l.mobile&&i.unshift(e.createElement(y,{client:"mobile",stat:l.mobile})),l.web&&i.unshift(e.createElement(y,{client:"web",stat:l.web})),i.length))if(a)(a.props.badges?a.props.badges:a.props.children).unshift(...i);else return e.createElement(M,{statuses:i})})})},onStop(){E.unpatchAll()},getSettingsPanel({settings:n}){return e.createElement(Z,{settings:n})}};V(re);
