function H(t){window.enmity.plugins.registerPlugin(t)}const y=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const e=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const U=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const Y=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme;const L=window.enmity.modules.common.Linking,D=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function j(t){return window.enmity.patcher.create(t)}var r="BetterStatusIndicator",k="1.0.1",q="Reveal statuses for every platform user is using with customizable color.",G=[{name:"mafu",id:"519760564755365888"}],K="#da70d6",W={name:r,version:k,description:q,authors:G,color:K};const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList;const M=o.Image;o.ImageBackground,o.KeyboardAvoidingView,o.Modal;const X=o.Pressable;o.RefreshControl;const J=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch;const C=o.Text;o.TextInput,o.TouchableHighlight;const Q=o.TouchableOpacity;o.TouchableWithoutFeedback,o.Touchable;const p=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel,o.FormRadio;const a=o.FormRow,A=o.FormSection;o.FormSelect,o.FormSubLabel;const R=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;function u(t){return window.enmity.assets.getIDByName(t)}function I(...t){return window.enmity.modules.getByProps(...t)}function F(...t){return window.enmity.modules.getByName(...t)}window.enmity.modules.common;function f(t){return"#"+("000000"+t.toString(16)).slice(-6)}const x=I("openLazy","hideActionSheet"),Z=F("CustomColorPickerActionSheet",{default:!1}).default;function S({label:t,color:n,setColor:l,leading:i,onSelect:m=void 0}){const s=D.createThemedStyleSheet({pickedColorText:{color:y.ThemeColorMap.TEXT_NORMAL,marginLeft:10,fontSize:16,width:72,fontFamily:y.Fonts.PRIMARY_MEDIUM},pickerColorPreview:{width:24,height:24,backgroundColor:f(n),borderRadius:3,borderWidth:1,borderColor:y.ThemeColorMap.HEADER_SECONDARY}});return e.createElement(a,{label:t,trailing:e.createElement(p,{style:{flexDirection:"row",alignItems:"center"}},e.createElement(p,{style:s.pickerColorPreview}),e.createElement(C,{style:s.pickedColorText},f(n)),e.createElement(a.Arrow,null)),leading:e.createElement(a.Icon,{source:u(i),style:{tintColor:f(n)}}),onPress:()=>{x.openLazy(new Promise(c=>c({default:Z})),"CustomColorPickerActionSheet",{color:n,onSelect:c=>{l(c),m&&m(c),x.hideActionSheet()}})}})}function w(t,n,l){window.enmity.settings.set(t,n,l)}function g(t,n,l){return window.enmity.settings.get(t,n,l)}const ee=u("img_account_sync_github_white"),te=u("Discord"),ne=u("img_account_sync_twitter_white"),oe=u("ic_message_retry"),ie=u("ic_members"),re=u("ic_friend_wave_24px"),le=u("ic_profile_24px"),me=I("acceptInviteAndTransitionToInviteChannel");var ae=({settings:t})=>{const n=D.createThemedStyleSheet({container:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:25,paddingTop:20,paddingLeft:20,paddingRight:30,color:y.ThemeColorMap.HEADER_PRIMARY,fontFamily:y.Fonts.PRIMARY_MEDIUM},author:{fontSize:15,paddingLeft:50,color:y.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:y.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}}),[l,i]=e.useState(g(r,"online",3908956)),[m,s]=e.useState(g(r,"offline",7634829)),[c,b]=e.useState(g(r,"idle",16426522)),[$,B]=e.useState(g(r,"dnd",15548997)),[z,P]=e.useState(g(r,"streaming",5846677));return e.createElement(J,null,e.createElement(p,{style:n.container},e.createElement(M,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:n.image}),e.createElement(p,{style:n.title},e.createElement(C,{style:n.name},"BetterStatusIndicator"),e.createElement(C,{style:n.author},"by mafu"))),e.createElement(A,{title:"COLOR"},e.createElement(S,{label:"Online",color:l,setColor:i,leading:"StatusOnline",onSelect:d=>{w(r,"online",d)}}),e.createElement(S,{label:"Offline",color:m,setColor:s,leading:"StatusOffline",onSelect:d=>{w(r,"offline",d)}}),e.createElement(S,{label:"Idle",color:c,setColor:b,leading:"StatusIdle",onSelect:d=>{w(r,"idle",d)}}),e.createElement(S,{label:"DND",color:$,setColor:B,leading:"StatusDND",onSelect:d=>{w(r,"dnd",d)}}),e.createElement(S,{label:"Streaming",color:z,setColor:P,leading:"StatusStreaming",onSelect:d=>{w(r,"streaming",d)}}),e.createElement(a,{label:"Reset to default",trailing:a.Arrow,leading:e.createElement(a.Icon,{source:oe}),onPress:()=>{w(r,"offline",7634829),s(7634829),w(r,"online",3908956),i(3908956),w(r,"idle",16426522),b(16426522),w(r,"dnd",15548997),B(15548997),w(r,"streaming",5846677),P(5846677)}})),e.createElement(A,{title:"PLACE"},e.createElement(a,{label:"Member List",leading:e.createElement(a.Icon,{source:ie}),trailing:e.createElement(R,{value:t.getBoolean("member",!0),onValueChange:d=>{t.set("member",d)}})}),e.createElement(a,{label:"Friends Tab",leading:e.createElement(a.Icon,{source:re}),trailing:e.createElement(R,{value:t.getBoolean("friend",!0),onValueChange:d=>{t.set("friend",d)}})}),e.createElement(a,{label:"Profile",leading:e.createElement(a.Icon,{source:le}),trailing:e.createElement(R,{value:t.getBoolean("profile",!0),onValueChange:d=>{t.set("profile",d)}})})),e.createElement(A,{title:"INFORMATION"},e.createElement(a,{label:"Follow me on Twitter",style:n.info,trailing:a.Arrow,leading:e.createElement(a.Icon,{source:ne}),onPress:()=>{L.openURL("https://twitter.com/m4fn3")}}),e.createElement(a,{label:"Visit my server for help",style:n.info,trailing:a.Arrow,leading:e.createElement(a.Icon,{source:te}),onPress:()=>{me.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{Y.pop()}})}}),e.createElement(a,{label:"Check Source on GitHub",style:n.info,trailing:a.Arrow,leading:e.createElement(a.Icon,{source:ee}),onPress:()=>{L.openURL("https://github.com/m4fn3/BetterStatusIndicator")}})),e.createElement(C,{style:n.footer},`v${k}`))};function N(t,n,l){return window.enmity.utilities.findInReactTree(t,n,l)}const{native:T}=window.enmity;T.version;const se=T.build;T.device,T.version;const h=j("BetterStatusIndicator"),ce=I("setCurrentUserOnConnectionOpen");let O=F("ProfileBadges",{all:!0,default:!1});const V=I("ProfileBadgesOld"),de=F("Status",{default:!1}),ue=u("ic_mobile_status"),ge=u("ic_monitor_24px"),we=u("ic_public"),fe=u("ic_robot_24px");function _(t){let n=f(g(r,"offline",7634829));return t=="online"?n=f(g(r,"online",3908956)):t=="idle"?n=f(g(r,"idle",16426522)):t=="dnd"?n=f(g(r,"dnd",15548997)):t=="streaming"&&(n=f(g(r,"streaming",5846677))),n}function ye(t){let n="StatusOffline";return t=="online"?n="StatusOnline":t=="idle"?n="StatusIdle":t=="dnd"?n="StatusDND":t=="streaming"&&(n="StatusStreaming"),u(n)}function v({client:t,stat:n}){let l=we,i;return t=="desktop"?(l=ge,i={}):t=="mobile"?(l=ue,i={marginRight:5,marginLeft:8}):t=="web"?i={height:20,width:20,marginRight:2,marginLeft:2}:t=="bot"&&(l=fe,i={}),e.createElement(Q,{onPress:()=>U.open({content:`${n} (${t.charAt(0).toUpperCase()}${t.slice(1)})`,source:ye(n)})},e.createElement(M,{source:l,style:{tintColor:_(n),marginLeft:5,...i}}))}function E({userId:t,isBot:n=!1,customStyle:l={}}){const i=ce.getState().clientStatuses[t];let m=[];return i&&(n?m.unshift(e.createElement(v,{client:"bot",stat:i.web})):(i.desktop&&m.unshift(e.createElement(v,{client:"desktop",stat:i.desktop})),i.mobile&&m.unshift(e.createElement(v,{client:"mobile",stat:i.mobile})),i.web&&m.unshift(e.createElement(v,{client:"web",stat:i.web})))),e.createElement(p,{style:[{flexDirection:"row",alignItems:"center"},l]},...m)}const pe={...W,onStart(){h.after(de,"default",(n,[l],i)=>{i.props.children.props.style.tintColor=l.streaming?_("streaming"):_(l.status)}),h.after(X.type,"render",(n,l,i)=>{if(g(r,"friend",!0)){const m=N(i,s=>{var c;return((c=s.props)==null?void 0:c.children[0][1].type.name)=="FriendPresence"});if(m){const s=m.props.children[0][1].props.userId;i.props.children[0].splice(-1,0,e.createElement(E,{userId:s,customStyle:{marginRight:5}}))}}});const t=h.after(p,"render",(n,l,i)=>{if(g(r,"member",!0)){const m=N(i,s=>s.props.type==="MEMBER");m&&(h.after(m.type,"type",(s,[c],b)=>{b.props.children.push(e.createElement(E,{userId:c.userId,isBot:c.user.bot}))}),t())}});V&&se>="42235"&&(O=[V]),O.forEach(n=>{h.after(n,"default",(l,[i],m)=>{if(g(r,"profile",!0)){let s={marginLeft:3,marginRight:3};if(m){let c=m.props.badges?m.props.badges:m.props.children;if(c)c.unshift(e.createElement(E,{userId:i.user.id,isBot:i.user.bot,customStyle:s}));else return e.createElement(E,{userId:i.user.id,isBot:i.user.bot,customStyle:s})}else return e.createElement(E,{userId:i.user.id,isBot:i.user.bot,customStyle:s})}})})},onStop(){h.unpatchAll()},getSettingsPanel({settings:t}){return e.createElement(ae,{settings:t})}};H(pe);
